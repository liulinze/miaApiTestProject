接口自动化测试框架帮助文档
（新版）

一、框架结构

1.autoFramework：框架的主体文件目录，包含Application和Core层。
    1.1 Core层包含的即框架运行的核心代码模块，代码模块之间没有关联。
    1.2 Application层包含的是对Core层中的核心代码模块的调用，模块组织的API。使各个独立的代码模块形成有效的框架功能模块。Application层中的代码
    会从config层以及data目录下的部分子目录中读取相应配置信息，文件以完成测试。例如，testApi会从config层的OriginalParameters目录下读取原始设置
    参数，并传给Core层的相应核心模块，完成测试用例的生成。

2.config：框架的配置层目录。包含完成测试的所有必须参数，是用户使用过程中必须要明白各个参数含义的文件层。
    2.1 OriginalParameters，用于存放不同的项目的原始参数json文件。框架从该层中读取参数完成测试。具体参数意义及用法见下文。
    2.2 Config.py，用于配置框架的一些必须运行参数。参考下文框架使用。
    2.3 __init__.py:框架执行层的必须文件，用于Python的包与模块管理，不可删除。各层目录中的该文件作用相同。

3.data：框架的一些相关数据保存目录。
    3.1 authsession目录，用于存放接口测试中的鉴权中间文件。方便测试过程中随时读取。
    3.2 interfaceProject目录，可以用来存放当前无需执行，但已经生成好的测试用例或者原始参数文件。该目录独立于框架之外。只是一个存放目录。
    如果用户有其他目录可以存放，该目录功能可忽略。
    3.3 log目录，用于存放框架执行过程中的log文件，用于在执行出现问题时，可以查看日志，以跟踪失败原因。
    3.4 report目录，用于存放框架执行测试后生成的report，每次测试均会生成一个包含执行时间戳的report，以html文件格式存放在该目录下。
    3.5 sql目录，功用与interfaceProject目录相同，只是一个存放sql语句文件的目录。
    3.6 testcase目录，用于存放框架根据用户配置的原始参数生成的测试用例。该目录下文件可以自主配置。用户可以把以前生成好的测试用例文件放入
    该目录，以执行测试。testcaseTemplate目录，该目录用于存放框架生成测试用例的模板文件。不可删除。

4.tools：独立于框架的一些工具代码存放目录。包含独立于框架的几个小工具。
    4.1 databaseFunction.py 可以用于执行数据库操作，将数据库配置及sql语句输入参数项，传入函数即可得到相应执行结果。该工具暂时未完成开发。
    4.2 priceCalculate.py 可以用来完成价格计算。计算的价格根据订单结算页的数据项完成，可以得到税费，运费，总价等信息。算法为蜜芽价格计算方法。

5.console.py：框架的发起文件。内部组织了测试流程。

6.start.bat：windows环境下一键启动测试的文件。在windows环境下双击即可执行测试，前提是参数项配置完毕。

7.AutoFramework_V*****_****：版本号文件，无内容，仅起标识版本的作用


二、框架使用
1.参数配置
    1.1 config 框架公共参数参数配置
        LogLevel：用于标记框架执行中的日志生成级别。级别设置：Critical > Error > Warning > Info > Debug > Noset，日志的上层级别包含
    当前级别的日志和下层级别的日志。
        EmailSetDict：用于配置发送邮件相关的配置项，设置项依次为：发件人，收件人，Stmp服务器域名，登录用户名，登录密码，连接地址，邮件主题
        InterfaceTest：用于配置接口测试的关键参数：包含报告标题，发送邮件开关，生成用例开关，发送邮件开关的值为Y时，框架会发送邮件给指定收件人。
    反之不会发送该邮件，即使EmailSetDict中配置了相关参数也不会发送。而生成用例开关，是为了提供框架是否需要生成用例而设置的参数。值为Y时生成，
    反之不生成。生成用例的场景用于第一次执行测试时，用户只需要按照下文原始参数配置要求，配置好原始参数，再设置本项开关为Y，框架即可读取原始参数
    生成用例。如果用例已经生成完毕，那么，用户可以将生成好的用例直接放到data目录下的testcase子目录中，将本项开关设置为N，则框架将会直接将testcase
    添加到测试用例集中并执行。
        BaseURL：用于管理接口访问的基本url，框架会在执行用例时将baseUrl与接口名称参数拼接到一起形成一个访问地址。该参数可以管理多个baseUrl地址。
    按照协定格式写入列表的“[]”中即可。baseUrl以字符串形式存放，即用英文引号“ "" ”包住，多个baseUrl以英文“,”分隔开。
        LoginUsername：用于框架完成登录操作使用的参数。因接口访问需要鉴权参数authsession，该参数是通过登录接口返回的，所以该参数为必须配置项。
        LoginPassword：与LoginPassword配合使用。
        InterfacePubPara：访问接口的一些公共参数，已经写定。用户只需要根据测试的接口是Android端还是IOS端，将无需使用的配置内容用三个英文引号包住
    即可。参数项中的Version子项的value值，需要根据测试的api版本修改。
    
    1.2生成测试用例的原始参数配置，参数使用json格式的键值对形式管理。
        1.2.1 在config的OriginalParameters子目录下建立相应的项目目录，然后在项目目录下创建不重复的符合windows文件命名规则的json文件。
        1.2.2 json文件内容书写。请对照参考sample.json文件阅读以下内容：
            1.2.2.1 json文件最外层是一个数组的中括号“[]”，数组中的一个元素是框架中定义的一条用例。每条用例包含两个必须参数和一个非必须参数。
                TestcaseMethodName，对应的值是测试用例名称的描述，用于在报告中描述对应测试用例名称对应的解释。
                TestOrder，值是一个数组，按照顺序展开测试用例，元素以{}形式展开，内含访问接口所需的参数。例如一个测试用例所描述的场景或操作，
            需要依次访问接口1,2,3，那么这里就按照顺序和要求填写接口1,2,3的参数项即可。
                isNeedCleanCart，是用于标记是否需要执行清空购物车操作。如果需要，则给该参数的值填写Y即可。如果不需要，该参数的键值对可以去除不写。
            1.2.2.2 TestOrder参数内组成解析：
                TestOrder参数中的每一个元素标记业务串联过程中的一次接口访问操作。按场景所需的顺序展开。
                每个元素的结构均包含5个必须参数和3个非必须参数，所有参数项全部使用字符串传入。
                5个必须参数是：BaseUrlNum，requestMethod，requestInterfaceName，requestParas，resultJudge
                3个非必须参数是：isNeedOutput，isNeedAuthsession，isNeedCycle
                BaseUrlNum标记的分别是要使用的baseUrl在config的BaseURL项中的位置，第一个就是1，第二个就是2，依次类推。使用字符串传入。
                requestMethod标记的是访问接口的方法是get，post等中的哪一个。使用字符串传入。
                requestInterfaceName标记的是访问的接口url，使用字符串传入。例如添加购物车接口：“/topcart/add”
                requestParas标记的是访问接口需要传递的参数，没有可以传空字符串。该项参数需要以json标准的集合形式传入，不是字符串传入。
                resultJudge标记的是断言语句，断言语句由数组传入，数组中的元素再以集合标注，集合中有四个必须参数项。
                isNeedOutput标记的是当前接口访问有没有需要传递给后续接口的结果。如果有，需要给该参数中传入需要传递的结果名称是什么，例如：
            需要从当前接口访问中获取princ项的值，则在isNeedOutput中传入“princ”即可。如果没有，该参数项可以去除不写。当前仅支持获取结果的content
            下的参数项。暂时不支持第三层及以下的参数项获取。
                isNeedAuthsession标记的是当前接口访问是否需要读取data目录下的公共参数authsession子目录下的鉴权信息。默认读取，如果不需要，传入N
            即可。如果需要，该项参数可以去除不写。
                isNeedCycle标记的是一个轮询接口result，专有项。仅在访问订单系统时会用到。默认是N，其他接口该项参数可以去除不写。需要用时传入Y即可。
            1.2.2.3 resultJudge参数组成解析：
                该参数包含四个必须参数项：assertExpect，assertResult，assertGrade，assertThirdLevelName
                assertExpect标记的是断言的期望值
                assertResult标记的是断言时要从结果中抓取的数据项的名字
                assertGrade标记的是上述数据项位于结果中json的第几层
                assertThirdLevelName标记的是在上述处于第三层时，第三层的名字，如果上述处于第一层或第二层，则该项需要传入None，以字符串传入。
                
2.框架使用流程
    2.1 配置Config下的公共参数。注意此处需要如果需要根据配置的参数生成用例，则需要配置相应的生成用例开关为Y
    2.2 在OriginalParameters下书写各个用例所用的参数。
    2.3 双击start.bat即可执行框架。
    2.4 报告查看：查看相应邮件。或使用浏览器打开本地目录下的data中的report下相应时间的报告即可查看。
    2.5 如果框架执行有错，可以根据命令行中的提示结合data中的log下的日志文件定位原因，进行调试。
    
3.框架调试
    3.1框架调试从start发起的话，无需做任何改动。直接进行调试。
    3.2框架如果需要从某个文件调试，需要注意文件上方的注释内容，将相应的注释内容放开。
    
    
三、改进方向

以更直观的excel形式管理原始参数输入。
    
            
    